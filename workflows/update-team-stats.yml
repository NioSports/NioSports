name: Actualizar EstadÃ­sticas de Equipos NBA

on:
  schedule:
    - cron: '0 8 * * *'  # 8 AM UTC = 3 AM Ecuador (cada dÃ­a)
  workflow_dispatch:

jobs:
  update-team-stats:
    runs-on: ubuntu-latest
    timeout-minutes: 30
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v3
      
      - name: ğŸ Python Setup
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
      
      - name: ğŸ“¦ Instalar Dependencias
        run: pip install requests --break-system-packages
      
      - name: ğŸ“Š Actualizar Stats de Equipos (TeamRankings)
        env:
          BALLDONTLIE_API_KEY: ${{ secrets.BALLDONTLIE_API_KEY }}
        run: |
          echo "ğŸ“Š Actualizando estadÃ­sticas de equipos..."
          # Script de actualizaciÃ³n de equipos (a desarrollar)
          echo "âœ… Proceso completado"
        continue-on-error: true
      
      - name: ğŸ’¾ Commit y Push
        run: |
          git config user.email "actions@github.com"
          git config user.name "GitHub Actions Teams"
          git add data/nba-stats.json || true
          git diff --quiet || git commit -m "ğŸ€ Stats de equipos actualizadas - $(date +'%Y-%m-%d')"
          git push || true
      
      - name: âœ… Resumen
        if: always()
        run: |
          echo "=================================="
          echo "âœ… ActualizaciÃ³n de equipos completada"
          echo "ğŸ• Hora: $(date)"
          echo "=================================="
